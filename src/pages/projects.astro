---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import LiquidGlassNav from "../components/LiquidGlassNav.astro";
import ProjectCard from "../components/cards/ProjectCard.astro";

const projects = await getCollection("projects");
const sortedProjects = projects.sort((a, b) => {
  const dateA = a.data.date ? new Date(a.data.date).getTime() : 0;
  const dateB = b.data.date ? new Date(b.data.date).getTime() : 0;
  return dateB - dateA;
});
---

<BaseLayout
  title="Projects - Piyush Jain"
  description="Personal and technical projects"
>
  <LiquidGlassNav />
  <div class="max-w-4xl mx-auto">
    <h1 class="text-4xl md:text-5xl font-bold mb-8">Projects</h1>

    <p class="text-lg text-muted mb-6">
      Projects are consolidated under the Publications, Research, and Projects
      page.
    </p>
    <p class="text-sm text-muted mb-12">
      See <a href="/publications-research-projects" class="hover:underline"
        >Publications &amp; Projects</a
      > for the complete list.
    </p>

    {
      sortedProjects.length > 0 ? (
        <div class="space-y-6">
          {sortedProjects.map((project) => (
            <ProjectCard entry={project} />
          ))}
        </div>
      ) : (
        <p class="text-muted">Projects coming soon.</p>
      )
    }
  </div>
</BaseLayout>
